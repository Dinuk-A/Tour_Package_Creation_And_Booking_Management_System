<!DOCTYPE html>
<html lang="en">
    <head th:replace="~{thymeleafFrs :: commonHeadFr}"></head>

    <head>
        <!-- link employee css -->
        <!-- <link rel="stylesheet" href="css/privilege.css"> -->
    
        <!-- link employee js -->
        <script src="controllerJSs/privilege.js"></script>
    
        
    </head>
<body>
    <header th:replace="~{thymeleafFrs :: headerFragment}"></header>
    <aside th:replace="~{thymeleafFrs :: asideFragment}"></aside>
    <div th:replace="~{thymeleafFrs :: userInfoEditModalFragment}"></div>

    <main id="mainAreaID" class="main min-vh-100 ">

        <!-- Tabs navigation panel -->
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <!-- for table side -->
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="table-tab" data-bs-toggle="tab" href="#tablePriviHolderDiv" role="tab"
                    aria-controls="tablePriviHolderDiv" aria-selected="true">Privilege Table</a>
            </li>
            <!-- for form side -->
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="form-tab" data-bs-toggle="tab" href="#form" role="tab" aria-controls="form"
                    aria-selected="false">Privilege Form</a>
            </li>
        </ul>

        <!-- Tabs content -->
        <div class="tab-content mt-1" id="myTabContent">
            <!-- Table tab  -->
            <div id="tablePriviHolderDiv" class="tab-pane fade show active table-container bg-info bg-opacity-25"
                role="tabpanel" aria-labelledby="table-tab">
                <!-- a table will be dynamically generated in here -->
            </div>

            <!-- Form tab -->
            <div class="tab-pane fade" id="form" role="tabpanel" aria-labelledby="form-tab">
                <div class="shadow-sm w-75 mx-auto">

                    <form id="formPrivilege" onsubmit="return false">

                        <!-- select ROLE starts -->
                        <div class="row mt-2">
                            <label for="selectRole" class="col-4 col-form-label fw-bold">Role:</label>
                            <div class="col-8">
                                <select name="" id="selectRole" class="form-select" required
                                    onchange="dynamicSelectValidator(this, '' , 'privilege', 'role'); generateModuleList(); "></select>
                            </div>
                        </div>

                        <!--select MODULE starts -->
                        <div class="row mt-2">
                            <label for="selectModule" class="col-4 col-form-label fw-bold">Module :</label>
                            <div class="col-8">
                                <select name="" id="selectModule" class="form-select" required
                                    onchange="dynamicSelectValidator(this, '' , 'privilege', 'module' );  "></select>
                            </div>
                        </div>

                        <div class="row mt-4">

                            <!-- start SELECT privilege -->
                            <div class="row mt-2">
                                <label class="col-4 col-form-label fw-bold"> SELECT : </label>
                                <div class="col-8">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" role="switch" id="selectSwitch"
                                            onchange="checkPrivi(selectSwitch, 'privilege' , 'privselect',true, false, labelSel,'Select')">
                                        <label class="form-check-label" for="selectSwitch" id="labelSel">Select
                                            Privilege
                                            Not Granted</label>
                                    </div>
                                </div>
                            </div>

                            <!-- start INSERT privilege -->
                            <div class="row mt-2">
                                <label class="col-4 col-form-label fw-bold"> INSERT : </label>
                                <div class="col-8">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" role="switch" id="insertSwitch"
                                            onchange="checkPrivi(insertSwitch, 'privilege' , 'privinsert',true, false, labelInsert,'Insert')">
                                        <label class="form-check-label" for="insertSwitch" id="labelInsert">Insert
                                            Privilege
                                            Not Granted</label>
                                    </div>
                                </div>
                            </div>

                            <!-- start UPDATE privilege -->
                            <div class="row mt-2">
                                <label class="col-4 col-form-label fw-bold"> UPDATE : </label>
                                <div class="col-8">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" role="switch" id="updateSwitch"
                                            onchange="checkPrivi(updateSwitch, 'privilege' , 'privupdate',true, false, labelUpdate,'Update')">
                                        <label class="form-check-label" for="updateSwitch" id="labelUpdate">Insert
                                            Privilege
                                            Not Granted</label>
                                    </div>
                                </div>
                            </div>

                            <!-- start DELETE privilege -->
                            <div class="row mt-2">
                                <label class="col-4 col-form-label fw-bold"> DELETE : </label>
                                <div class="col-8">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" role="switch" id="deleteSwitch"
                                            onchange="checkPrivi(deleteSwitch, 'privilege' , 'privdelete',true, false, labelDelete,'Delete')">
                                        <label class="form-check-label" for="deleteSwitch" id="labelDelete">Insert
                                            Privilege
                                            Not Granted</label>
                                    </div>
                                </div>
                            </div>

                            <!--3 FORM buttons start -->
                            <div class="row m-2">
                                <div class="col-4 text-start">
                                    <button type="reset" class="btn btn-all btn-clear fw-bold"
                                        onclick="refreshPrivilegeForm()">Clear</button>
                                </div>
                                <div class="col-8 text-end">
                                    <button type="button" id="priviUpdateBtn" class="btn btn-all btn-update fw-bold"
                                        onclick="updatePrivilege()" style="pointer-events: all;">Update</button>

                                    <button type="submit" id="priviAddBtn" class="btn btn-all btn-add fw-bold"
                                        onclick="addNewEmployee()" style="pointer-events: all;">Add</button>
                                </div>
                            </div>
                    </form>

                </div>
            </div>
        </div>

        <!-- Modal to display full details of a row -->
        <div class="modal fade py-5" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <!-- Modal Header -->
                    <div class="modal-header bg-primary text-white">
                        <h5 class="modal-title" id="infoModalLabel">Privilege Information</h5>
                        <button type="button" class="btn-close text-white" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                    </div>

                    <!-- Modal Body -->
                    <div class="modal-body">
                        <div class="container">
                            <!-- Personal Details Section -->
                            <h6 class="text-primary border-bottom pb-2">Personal Details</h6>
                            <div class="row mb-3">
                                <div class="col-6">
                                    <p class="fw-bold mb-1">Employee Code:</p>
                                    <p id="modalEmpCode"></p>
                                </div>
                                <div class="col-6">
                                    <p class="fw-bold mb-1">Full Name:</p>
                                    <p id="modalEmpFullName"></p>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-6">
                                    <p class="fw-bold mb-1">NIC:</p>
                                    <p id="modalEmpNIC"></p>
                                </div>
                                <div class="col-6">
                                    <p class="fw-bold mb-1">Date of Birth:</p>
                                    <p id="modalEmpDOB"></p>
                                </div>
                            </div>

                            <!-- Contact Information Section -->
                            <h6 class="text-primary border-bottom pb-2">Contact Information</h6>
                            <div class="row mb-3">
                                <div class="col-6">
                                    <p class="fw-bold mb-1">Email:</p>
                                    <p id="modalEmpEmail"></p>
                                </div>
                                <div class="col-6">
                                    <p class="fw-bold mb-1">Mobile Number:</p>
                                    <p id="modalEmpMobileNum"></p>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-6">
                                    <p class="fw-bold mb-1">Landline Number:</p>
                                    <p id="modalEmpLandNum"></p>
                                </div>
                                <div class="col-6">
                                    <p class="fw-bold mb-1">Address:</p>
                                    <p id="modalEmpAddress"></p>
                                </div>
                            </div>

                            <!-- Additional Information Section -->
                            <h6 class="text-primary border-bottom pb-2">Additional Information</h6>
                            <div class="row">
                                <div class="col-6">
                                    <p class="fw-bold mb-1">Gender:</p>
                                    <p id="modalEmpGender"></p>
                                </div>
                                <div class="col-6">
                                    <p class="fw-bold mb-1">Note:</p>
                                    <p id="modalEmpNote"></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Modal Footer -->
                    <div class="modal-footer d-flex justify-content-between">
                        <button class="btn btn-outline-primary" onclick="printPriviTable()">Print</button>
                        <div>
                            <button class="btn btn-success me-2"
                                onclick="refillPriviForm(window['currentObject'])">Edit</button>
                            <button class="btn btn-danger"
                                onclick="deletePriviRecord(window['currentObject'])">Delete</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>
</body>
</html>